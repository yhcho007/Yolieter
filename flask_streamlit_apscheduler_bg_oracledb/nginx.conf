worker_processes 1; # 워커 프로세스 수 (CPU 코어 수에 맞춰 조절 가능)

events {
    worker_connections 1024; # 최대 연결 수
}

http {
    include mime.types;
    default_type application/octet-stream;
    sendfile on;
    keepalive_timeout 65;

    server {
        listen 80; # 컨테이너 안에서 80번 포트로 들어오는 요청을 들어!
        server_name localhost; # 서버 이름 설정

        # 루트 경로(/)로 들어오는 모든 요청을 Gunicorn이 실행 중인 5000번 포트로 넘겨줘.
        location / {
            proxy_pass http://127.0.0.1:5000; # Gunicorn 주소
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            # 필요한 다른 헤더나 설정들을 추가할 수 있어.
        }

        # 만약 Nginx에서 정적 파일을 서빙하거나 다른 경로를 설정하고 싶다면 여기에 추가하면 돼!
        # 예: location /static/ { alias /app/static/; }
    }
}
